// 
// Decompiled by Procyon v0.6.0
// 

package com.mentalfrostbyte.jello.mods.impl.exploit.disablers;

import com.mentalfrostbyte.jello.mods.Category;
import com.mentalfrostbyte.jello.mods.Module;
import mapped.*;

import java.util.ArrayList;

public class ViperDisabler extends Module
{
    private int field15937;
    private final ArrayList<Class8870> field15938;
    
    public ViperDisabler() {
        super(Category.EXPLOIT, "Viper", "Disabler for ViperMC");
        this.field15938 = new ArrayList<Class8870>();
    }
    
    @Override
    public void onEnable() {
        this.field15937 = 0;
    }
    
    @EventListener
    public void method10558(final UpdateWalkingEvent updateWalkingEvent) {
        if (!this.isEnabled() || ViperDisabler.mc.player == null) {
            return;
        }
        ++this.field15937;
        if (updateWalkingEvent.method17036() > ViperDisabler.mc.player.posY - 1.0E-6 && updateWalkingEvent.method17036() < ViperDisabler.mc.player.posY + 1.0E-6) {
            updateWalkingEvent.method17037(ViperDisabler.mc.player.posY + 0.4);
            updateWalkingEvent.method17045(false);
        }
        if (this.field15937 <= 60) {
            for (int i = 0; i < 10; ++i) {
                ViperDisabler.mc.method5269().method17292(new Class4354(ViperDisabler.mc.player.posX, ViperDisabler.mc.player.posY + ((i > 2 && i < 8) ? 0.2 : -0.2), ViperDisabler.mc.player.posZ, true));
            }
            ViperDisabler.mc.player.field4075 = 0.0;
            if (ViperDisabler.mc.player.ticksExisted <= 1) {
                this.field15938.clear();
            }
            if (!this.field15938.isEmpty()) {
                for (int j = 0; j < this.field15938.size(); ++j) {
                    final Class8870 class5745 = this.field15938.get(j);
                    if (class5745.method31165()) {
                        ViperDisabler.mc.method5269().method17292(class5745.method31166());
                        this.field15938.remove(j);
                    }
                }
            }
            return;
        }
        updateWalkingEvent.method17037(ViperDisabler.mc.player.posY + 0.4);
        updateWalkingEvent.method17045(false);
    }
    
    @EventListener
    public void method10559(final Class5723 class5723) {
        if (this.isEnabled()) {
            final IPacket method16998 = class5723.method16998();
            if (method16998 instanceof Class4396) {
                final Class4396 class5724 = (Class4396)method16998;
                class5723.setCancelled(true);
            }
            if (method16998 instanceof Class4393) {
                final Class4393 class5725 = (Class4393)method16998;
                class5723.setCancelled(true);
            }
        }
    }
}
