// 
// Decompiled by Procyon v0.6.0
// 

package com.mentalfrostbyte.jello.mods.impl.exploit.disablers;

import com.mentalfrostbyte.Client;
import com.mentalfrostbyte.jello.mods.Category;
import com.mentalfrostbyte.jello.mods.Module;
import com.mentalfrostbyte.jello.mods.ModuleWithSettings;
import com.mentalfrostbyte.jello.mods.impl.world.Disabler;
import com.mentalfrostbyte.jello.settings.impl.NumberSetting;
import mapped.*;

import java.util.ArrayList;

public class PingSpoofDisabler extends Module
{
    private final ArrayList<Class8438> field15921;
    
    public PingSpoofDisabler() {
        super(Category.EXPLOIT, "PingSpoof", "Makes you lagggy.");
        this.field15921 = new ArrayList<Class8438>();
        this.addSetting(new NumberSetting("Lag", "Your ping (ms)", 1000.0f, Float.class, 50.0f, 10000.0f, 10.0f));
    }
    
    @EventListener
    public void method10515(final EventLoadWorld eventLoadWorld) {
        Label_0007: {
            if (!this.isEnabled()) {
                final ModuleWithSettings class5733 = (ModuleWithSettings) Client.getInstance().moduleManager().getModuleByClass(Disabler.class);
                if (class5733.isEnabled()) {
                    if (class5733.getStringSettingValueByName("Type").equalsIgnoreCase("TP")) {
                        if (class5733.method10260().getBooleanValueFromSettingName("Ping spoof")) {
                            break Label_0007;
                        }
                    }
                }
                return;
            }
        }
        this.field15921.clear();
    }
    
    @EventListener
    public void method10516(final EventPlayerTick eventPlayerTick) {
        Label_0007: {
            if (!this.isEnabled()) {
                final ModuleWithSettings class5744 = (ModuleWithSettings) Client.getInstance().moduleManager().getModuleByClass(Disabler.class);
                if (class5744.isEnabled()) {
                    if (class5744.getStringSettingValueByName("Type").equalsIgnoreCase("TP")) {
                        if (class5744.method10260().getBooleanValueFromSettingName("Ping spoof")) {
                            break Label_0007;
                        }
                    }
                }
                return;
            }
        }
        if (PingSpoofDisabler.mc.player != null && PingSpoofDisabler.mc.method5282() != null) {
            if (PingSpoofDisabler.mc.player.ticksExisted <= 1) {
                this.field15921.clear();
            }
            if (!this.field15921.isEmpty()) {
                for (int i = 0; i < this.field15921.size(); ++i) {
                    final Class8438 class5745 = this.field15921.get(i);
                    if (class5745.method28168()) {
                        PingSpoofDisabler.mc.method5269().method17292(class5745.method28169());
                        this.field15921.remove(i);
                    }
                }
            }
        }
    }
    
    @EventListener
    public void method10517(final Class5723 class5723) {
        Label_0007: {
            if (!this.isEnabled()) {
                final ModuleWithSettings class5724 = (ModuleWithSettings) Client.getInstance().moduleManager().getModuleByClass(Disabler.class);
                if (class5724.isEnabled()) {
                    if (class5724.getStringSettingValueByName("Type").equalsIgnoreCase("TP")) {
                        if (class5724.method10260().getBooleanValueFromSettingName("Ping spoof")) {
                            break Label_0007;
                        }
                    }
                }
                return;
            }
        }
        if (PingSpoofDisabler.mc.method5282() != null) {
            final IPacket method16998 = class5723.method16998();
            if (method16998 instanceof Class4396) {
                this.field15921.add(new Class8438(new Class4303(((Class4396)method16998).method13223()), (long)this.getNumberSettingValueByName("Lag")));
                class5723.setCancelled(true);
            }
            if (method16998 instanceof Class4393) {
                final Class4393 class5725 = (Class4393)method16998;
                this.field15921.add(new Class8438(new Class4255(class5725.method13208(), class5725.method13209(), class5725.method13210()), (long)this.getNumberSettingValueByName("Lag")));
                class5723.setCancelled(true);
            }
        }
    }
}
