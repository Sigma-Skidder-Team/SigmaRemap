// 
// Decompiled by Procyon v0.6.0
// 

package com.mentalfrostbyte.jello.mods.impl.exploit.disablers;

import com.mentalfrostbyte.Client;
import com.mentalfrostbyte.jello.mods.Category;
import com.mentalfrostbyte.jello.mods.Module;
import mapped.*;

import java.util.ArrayList;
import java.util.List;

public class HypixelDisabler extends Module
{
    private final List<IPacket<?>> packets;
    private boolean field15684;
    private final TimerUtil timer;
    
    public HypixelDisabler() {
        super(Category.EXPLOIT, "Hypixel", "Disable watchdog.");
        this.packets = new ArrayList<IPacket<?>>();
        this.timer = new TimerUtil();
    }
    
    @Override
    public void onEnable() {
        if (Class9171.field38852) {
            if (!HypixelDisabler.mc.player.onGround) {
                this.field15684 = false;
            }
            else {
                final double field2395 = HypixelDisabler.mc.player.posX;
                final double field2396 = HypixelDisabler.mc.player.posY;
                final double field2397 = HypixelDisabler.mc.player.posZ;
                this.field15684 = false;
                HypixelDisabler.mc.method5269().method17292(new Class4354(field2395, field2396 + 0.2, field2397, false));
                HypixelDisabler.mc.method5269().method17292(new Class4354(field2395, field2396 + 0.1, field2397, false));
                this.field15684 = true;
                this.timer.reset();
                this.timer.start();
                if (!this.getBooleanValueFromSettingName("Instant")) {
                    Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Wait 5s..."));
                }
                else {
                    Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Move where you want"));
                }
            }
            return;
        }
        Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Set Hypixel mode before playing"));
    }
    
    @Override
    public void onDisable() {
        this.timer.reset();
        this.timer.start();
        if (this.field15684) {
            for (int size = this.packets.size(), i = 0; i < size; ++i) {
                HypixelDisabler.mc.method5269().method17292(this.packets.get(i));
            }
            Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Disabler canceled"));
        }
        this.packets.clear();
    }
    
    @EventListener
    public void method10162(final UpdateWalkingEventI updateWalkingEvent) {
        if (HypixelDisabler.mc.player != null && Class9171.field38852) {
            if (!this.field15684) {
                if (HypixelDisabler.mc.player.onGround) {
                    if (!this.getBooleanValueFromSettingName("Instant")) {
                        Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Wait 5s..."));
                    }
                    else {
                        Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Move where you want"));
                    }
                    this.timer.reset();
                    this.timer.start();
                    this.field15684 = true;
                }
            }
        }
    }
    
    @EventListener
    public void method10163(final Class5717 class5717) {
        if (HypixelDisabler.mc.player == null || !Class9171.field38852) {
            return;
        }
        if (!this.getBooleanValueFromSettingName("Instant")) {
            if (this.field15684) {
                class5717.method16973(0.0);
                class5717.method16975(0.0);
                class5717.method16977(0.0);
            }
        }
        if (this.timer.getElapsedTime() > 10000L && this.field15684) {
            this.field15684 = false;
            for (int size = this.packets.size(), i = 0; i < size; ++i) {
                HypixelDisabler.mc.method5269().method17292(this.packets.get(i));
            }
            this.packets.clear();
            this.timer.reset();
            this.timer.stop();
            this.method9914().toggle();
            Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Disabler failed"));
        }
    }
    
    @EventListener
    private void method10164(final Class5721 class5721) {
        if (HypixelDisabler.mc.method5269() == null || !Class9171.field38852) {
            return;
        }
        if (this.field15684) {
            if (!(class5721.method16990() instanceof Class4336)) {
                if (!(class5721.method16990() instanceof Class4353)) {
                    if (!(class5721.method16990() instanceof Class4381)) {
                        if (!(class5721.method16990() instanceof Class4380)) {
                            if (!(class5721.method16990() instanceof Class4307)) {
                                return;
                            }
                        }
                    }
                }
            }
            if (this.getBooleanValueFromSettingName("Instant")) {
                this.packets.add(class5721.method16990());
            }
            class5721.setCancelled(true);
        }
    }
    
    @EventListener
    public void method10165(final EventReceivePacket eventReceivePacket) {
        if (HypixelDisabler.mc.player != null) {
            if (this.field15684) {
                if (Class9171.field38852) {
                    if (!this.isEnabled() && !this.getBooleanValueFromSettingName("Instant")) {
                        return;
                    }
                    if (eventReceivePacket.getPacket() instanceof SPlayerPositionLookPacket) {
                        this.method9914().toggle();
                        if (!this.getBooleanValueFromSettingName("Instant")) {
                            Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "You can do what you want for 5s"));
                        }
                        else {
                            final SPlayerPositionLookPacket class5724 = (SPlayerPositionLookPacket) eventReceivePacket.getPacket();
                            eventReceivePacket.setCancelled(true);
                            HypixelDisabler.mc.method5269().method17292(new Class4355(class5724.field19377, class5724.field19378, class5724.field19379, class5724.yaw, class5724.pitch, false));
                            for (int size = this.packets.size(), i = 0; i < size; ++i) {
                                HypixelDisabler.mc.method5269().method17292(this.packets.get(i));
                            }
                            this.packets.clear();
                            Client.getInstance().getNotificationManager().send(new Notification("Hypixel disabler", "Successfully sent packets"));
                        }
                        this.field15684 = false;
                    }
                }
            }
        }
    }
}
